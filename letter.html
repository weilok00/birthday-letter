<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Letter</title>
<style>
  html,body{
    height:100%; margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    background: linear-gradient(180deg, #ffd6e8 0%, #ffe6cc 100%);
    color:#3b246b;
    background-attachment: fixed;
  }
  .wrap{
    min-height:100svh;
    display:flex;align-items:center;justify-content:center;
    padding:20px;
  }
  .letter{
    width: clamp(320px, 92vw, 500px);
    background:linear-gradient(180deg,#f7d9ff,#e0bbff);
    border:1px solid rgba(59,36,107,0.12);
    border-radius:16px;padding:20px 18px;
    box-shadow:0 10px 30px rgba(59,36,107,0.15);
    cursor:pointer;
    transform-origin:center;
  }
  .page { transition: opacity 0.8s ease, transform 0.8s ease; }
  .page.closing { opacity: 0; transform: scale(0.9); }
  h2{margin:0 0 40px;font-size:24px;text-align:center;color:#3b246b;}
  .body{line-height:1.85;font-size:16px;text-align:center;}
  .body img{
    display:block;
    width: clamp(60px, 28vw, 100px); 
    max-width: none;
    border-radius:12px;
    margin:16px auto;
    box-shadow:0 0 20px rgba(59,36,107,0.12);
  }
  .highlight{
    font-weight:700;font-size:18px;color:#4b3b85;
    display:block;text-align:center;margin:16px 0;
  }
  .heart{
    position:absolute;color:#ff99aa;font-size:18px;
    animation:floatUp 4s linear infinite;opacity:.8;
  }
  @keyframes floatUp{
    0%{transform:translateY(0) scale(1);opacity:.8;}
    100%{transform:translateY(-150px) scale(1.5);opacity:0;}
  }
  .hint { color:#4b3b85; font-size:14px; text-align:center; }
</style>
</head>
<body>
<div class="page" id="page">
  <div class="wrap" id="wrap">
    <article class="letter" id="letter">
      <h2>æ…§é›¯ ç¥ä½ ç”Ÿæ—¥å¿«ä¹ ğŸ‚</h2>
      <div class="body">
        <p>è‡ªä»é‚£å¤©ä½ æŠŠä½ çš„æƒ³æ³•å‘Šè¯‰æˆ‘ä¹‹åï¼Œ<br>
          è¿™æ®µæ—¶é—´æˆ‘ä¹Ÿæ¸æ¸åœ°æ›´äº†è§£ä½ äº†ã€‚<br>
          æˆ‘å¼€å§‹æ˜ç™½ä½ çš„æ€§æ ¼ï¼Œ<br>
          ä½ å–œæ¬¢è‡ªç”±ï¼Œ<br>
          ä¸å–œæ¬¢è¢«äººå‚¬ï¼Œ<br>
          ä¸å¤ªä¼šè¡¨è¾¾ï¼Œ<br>
          ä½†å¿ƒé‡Œæ€»æœ‰å¾ˆå¤šåœ¨æ„çš„äº‹ã€‚<br>
          ä»¥å‰çš„æˆ‘æˆ–è®¸ä¸å¤ªæ‡‚ï¼Œ<br>
          ä½†ç°åœ¨æˆ‘æ‡‚äº†ã€‚
        </p>

        <p>æˆ‘æ¸æ¸æ˜ç™½ï¼Œ<br>
          å–œæ¬¢ä¸€ä¸ªäººï¼Œ<br>
          å…¶å®ä¸ä¸€å®šè¦ä¸€ç›´è¿½ç€å¥¹ï¼Œ<br>
          è¦å¥¹å›åº”ï¼Œ<br>
          æœ‰æ—¶å€™ï¼Œ<br>
          é™é™åœ°åœ¨åŸåœ°å®ˆç€ï¼Œ<br>
          åè€Œæ›´èƒ½è®©å½¼æ­¤å®‰å¿ƒã€‚<br>
          æˆ‘åæ€äº†ä»¥å‰çš„è‡ªå·±ï¼Œ<br>
          ä¹Ÿè®¸æˆ‘å¤ªæ€¥ã€<br>
          å¤ªæƒ³é è¿‘ï¼Œ<br>
          åè€Œè®©ä½ è§‰å¾—æœ‰å‹åŠ›ã€‚
        </p>

        <p>è€å®è¯´ï¼Œ<br>
          æˆ‘æ›¾ç»æœ‰è¿‡çŠ¹è±«ï¼Œ<br>
          ä¹Ÿæƒ³è¿‡å°±è¿™æ ·æ”¾ä¸‹ã€‚<br>
          å¯æ¯å½“æˆ‘çœŸçš„æƒ³æ”¾ä¸‹çš„æ—¶å€™ï¼Œ<br>
          æˆ‘å‘ç°æˆ‘è¿˜æ˜¯ä¼šæƒ³åˆ°ä½ ï¼Œ<br>
          æƒ³èµ·ä½ é‚£åŒçˆ±ç¬‘çš„çœ¼ç›ã€‚ğŸ¥°
        </p>

        <img src="./images/picture.jpg" alt="Hui Wen">

        <p>æˆ‘ä¸è¦æ±‚ä½ é©¬ä¸Šå›åº”ä»€ä¹ˆï¼Œ<br>
          ä¹Ÿä¸ä¼šè®©ä½ è§‰å¾—æœ‰è´Ÿæ‹…ã€‚<br>
          æˆ‘ä¸ä¼šå†åƒä»¥å‰é‚£æ ·æ€¥ç€é è¿‘ä½ ï¼Œ<br>
          ä½†æ˜¯æˆ‘ä¾ç„¶åœ¨ï¼Œ<br>
          åªæ˜¯æ¢äº†ä¸€ç§æ›´å®‰é™çš„æ–¹å¼ã€‚<br>
          æˆ‘æƒ³ç»™ä½ ä¸€ç‚¹ç©ºé—´ï¼Œ<br>
          ä¹Ÿç»™è‡ªå·±ä¸€ç‚¹æ—¶é—´ã€‚
        </p>

        <p>æˆ‘ä¸å†è´£æ€ªä»»ä½•äº‹æƒ…çš„å‘ç”Ÿï¼Œ<br>
          åè€Œæ›´æ„Ÿæ¿€é‚£ä¸€æ®µæˆ‘ä»¬ä¸€èµ·ç»å†è¿‡çš„æ—¶å…‰ã€‚<br>
          æ­£æ˜¯é‚£äº›æ—¶åˆ»ï¼Œ<br>
          è®©æˆ‘çœ‹æ¸…äº†è‡ªå·±ï¼Œ<br>
          ä¹Ÿè®©æˆ‘æ›´ç¡®å®šä¸€ä»¶äº‹ï¼š
        </p>

        <span class="highlight">å› ä¸ºæ˜¯ä½ ï¼Œæˆ‘æƒ³å†ä¸ºè¿™ä»½æ„Ÿæƒ…å†åŠªåŠ›ä¸€æ¬¡ã€‚</span>

        <p>å¸Œæœ›ä½ æ–°çš„ä¸€å²ï¼Œ<br>
          èƒ½æ›´è½»æ¾åœ°ç”Ÿæ´»ï¼Œ<br>
          å°‘ä¸€ç‚¹çƒ¦æ¼ï¼Œ<br>
          å¤šä¸€ç‚¹å¾®ç¬‘ã€‚<br>
          å»åšå–œæ¬¢çš„äº‹ï¼Œ<br>
          å»åˆ°æƒ³å»çš„åœ°æ–¹ï¼Œ<br>
          å’Œè®©ä½ æ„Ÿåˆ°å®‰å¿ƒã€<br>
          èˆ’æœçš„äººåœ¨ä¸€èµ·ã€‚<br>
        </p>

        <p>åœ¨ä½ å–œæ¬¢çš„è‡ªç”±é‡Œï¼Œ<br>
          ä¹Ÿå¶å°”æƒ³èµ·ï¼Œ<br>
          æœ‰ä¸€ä¸ªäººï¼Œ<br>
          ä¸€ç›´çœŸå¿ƒç¥ç¦ç€ä½ ã€‚ğŸŒ¹
        </p>
      </div>
    </article>
  </div>
  <div class="hint">ï¼ˆç‚¹å‡»è¿”å›å°é¢ï¼‰</div>
</div>

<script>
  const img = document.querySelector('.body img');
  setInterval(()=>{
    const heart = document.createElement('div');
    heart.classList.add('heart');
    heart.textContent = 'âœ¨';
    const rect = img.getBoundingClientRect();
    const x = Math.random() * 60 - 30;
    heart.style.left = (rect.left + rect.width / 2 + x) + 'px';
    heart.style.top  = (rect.top + window.scrollY + rect.height / 2) + 'px';
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(), 4000);
  }, 1200);

  const page = document.getElementById('page');
  const card = document.getElementById('letter');

  const backHome = () => {
    if (window.top && window.top !== window) {
      window.top.postMessage({ type: 'CLOSE_STAGE' }, '*');
    } else {
      location.href = 'index.html';
    }
  };

  if (card && page && page.classList) {
    card.addEventListener('click', () => {
      page.classList.add('closing');

      let done = false;
      const finish = () => {
        if (done) return;
        done = true;
        page.removeEventListener('transitionend', finish);
        page.removeEventListener('webkitTransitionEnd', finish);
        backHome();
      };

      page.addEventListener('transitionend', finish, { once: true });
      page.addEventListener('webkitTransitionEnd', finish, { once: true });
      setTimeout(finish, 900);
    });
  }
</script>
</body>
</html>
